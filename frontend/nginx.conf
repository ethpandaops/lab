server {
    listen 80;
    server_name _;
    root /usr/share/nginx/html;
    
    # Dynamic bootstrap config
    location = /bootstrap.json {
        default_type application/json;
        # Use environment variable or fallback to empty config
        set $bootstrap_config '${BOOTSTRAP_CONFIG}';
        if ($bootstrap_config = '') {
            set $bootstrap_config '{"backend":{"url":""}}';
        }
        return 200 $bootstrap_config;
    }

    # Static files
    location / {
        try_files $uri $uri/ /index.html;
        add_header Cache-Control "public, max-age=3600";
    }

    # Health check
    location /health {
        access_log off;
        return 200 "healthy\n";
    }
} 